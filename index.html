<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VR Interactive Gallery</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script>
      // Interactive object component
      AFRAME.registerComponent("interactive-object", {
        schema: {
          label: { type: "string", default: "Object" },
        },
        init: function () {
          const el = this.el;
          const originalScale = el.object3D.scale.clone();
          const originalColor = el.getAttribute("material").color;

          // Create floating label (initially hidden)
          const label = document.createElement("a-entity");
          label.setAttribute("text", {
            value: this.data.label,
            align: "center",
            width: 3,
            color: "#ffffff",
          });
          label.setAttribute("position", "0 1.5 0");
          label.setAttribute("visible", false);
          el.appendChild(label);

          // Hover interaction
          el.addEventListener("mouseenter", () => {
            el.setAttribute("animation__scale", {
              property: "scale",
              to: `${originalScale.x * 1.3} ${originalScale.y * 1.3} ${originalScale.z * 1.3}`,
              dur: 300,
              easing: "easeOutElastic",
            });
            label.setAttribute("visible", true);
          });

          // Leave interaction
          el.addEventListener("mouseleave", () => {
            el.setAttribute("animation__scale", {
              property: "scale",
              to: `${originalScale.x} ${originalScale.y} ${originalScale.z}`,
              dur: 300,
              easing: "easeOutElastic",
            });
            label.setAttribute("visible", false);
          });

          // Click color flash
          el.addEventListener("click", () => {
            el.setAttribute("animation__color", {
              property: "material.color",
              from: "#FFFFFF",
              to: originalColor,
              dur: 600,
              easing: "easeInOutQuad",
            });
          });
        },
      });

      // Teleport component
      AFRAME.registerComponent("teleport-point", {
        schema: { target: { type: "vec3" } },
        init: function () {
          const el = this.el;
          const data = this.data;
          const camera = document.querySelector("#camera");

          el.addEventListener("click", () => {
            camera.setAttribute("animation__move", {
              property: "position",
              to: `${data.target.x} ${data.target.y} ${data.target.z}`,
              dur: 800,
              easing: "easeInOutQuad",
            });
          });

          el.addEventListener("mouseenter", () => {
            el.setAttribute("scale", "1.3 1.3 1.3");
          });
          el.addEventListener("mouseleave", () => {
            el.setAttribute("scale", "1 1 1");
          });
        },
      });
    </script>
  </head>

  <body>
    <a-scene>
      <!-- Camera -->
      <a-entity
        id="camera"
        camera
        position="0 1.6 5"
        look-controls
        wasd-controls
      >
        <a-cursor
          color="#FFD700"
          fuse="true"
          fuse-timeout="1200"
          raycaster="objects: .interactive, .teleport"
        ></a-cursor>
      </a-entity>

      <!-- Lights -->
      <a-light type="ambient" color="#BBB" intensity="0.8"></a-light>
      <a-light
        type="directional"
        color="#FFF"
        intensity="0.6"
        position="2 4 2"
      ></a-light>

      <!-- Environment -->
      <a-sky color="#87CEEB"></a-sky>
      <a-plane
        rotation="-90 0 0"
        width="30"
        height="30"
        color="#7BC8A4"
      ></a-plane>

      <!-- Interactive Objects -->
      <a-sphere
        class="interactive"
        position="-3 1.5 -2"
        radius="0.8"
        color="#FF6B9D"
        metalness="0.8"
        roughness="0.2"
        interactive-object="label: Crystal Sphere"
        animation="property: rotation; to: 0 360 0; loop: true; dur: 8000; easing: linear"
      ></a-sphere>

      <a-box
        class="interactive"
        position="3 1.2 -2"
        width="1.5"
        height="1.5"
        depth="1.5"
        color="#50C878"
        metalness="0.7"
        roughness="0.3"
        rotation="15 45 0"
        interactive-object="label: Emerald Cube"
        animation="property: rotation; to: 375 405 360; loop: true; dur: 10000; easing: linear"
      ></a-box>

      <a-cone
        class="interactive"
        position="0 1 -3"
        radius-bottom="1"
        height="2"
        color="#FFD700"
        metalness="0.9"
        roughness="0.1"
        interactive-object="label: Golden Pyramid"
        animation="property: position; to: 0 1.3 -3; dir: alternate; loop: true; dur: 2000; easing: easeInOutSine"
      ></a-cone>

      <!-- Teleport points -->
      <a-cylinder
        class="teleport"
        position="-4 0.1 3"
        radius="0.5"
        height="0.2"
        color="#4CC3D9"
        opacity="0.8"
        teleport-point="target: -4 1.6 3"
      ></a-cylinder>

      <a-cylinder
        class="teleport"
        position="4 0.1 3"
        radius="0.5"
        height="0.2"
        color="#4CC3D9"
        opacity="0.8"
        teleport-point="target: 4 1.6 3"
      ></a-cylinder>

      <a-cylinder
        class="teleport"
        position="0 0.1 -6"
        radius="0.5"
        height="0.2"
        color="#4CC3D9"
        opacity="0.8"
        teleport-point="target: 0 1.6 -6"
      ></a-cylinder>
    </a-scene>
  </body>
</html>